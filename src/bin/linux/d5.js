function _0x2d90(_0x1cf03c,_0x1ae489){const _0x5ecf41=_0x1ae4();_0x2d90=function(_0x261043,_0x1cadd4){_0x261043=_0x261043-0x0;let _0x566088=_0x5ecf41[_0x261043];if(_0x2d90['iEfiTu']===undefined){var _0x15e7b0=function(_0x287e4b){const _0x3ce1b5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x45eeaf='';let _0x57eb91='';for(let _0x25d75c=0x0,_0x47e22d,_0x3e500b,_0x289cbf=0x0;_0x3e500b=_0x287e4b['charAt'](_0x289cbf++);~_0x3e500b&&(_0x47e22d=_0x25d75c%0x4?_0x47e22d*0x40+_0x3e500b:_0x3e500b,_0x25d75c++%0x4)?_0x45eeaf+=String['fromCharCode'](0xff&_0x47e22d>>(-0x2*_0x25d75c&0x6)):0x0){_0x3e500b=_0x3ce1b5['indexOf'](_0x3e500b);}for(let _0x4844bd=0x0,_0x3ac925=_0x45eeaf['length'];_0x4844bd<_0x3ac925;_0x4844bd++){_0x57eb91+='%'+('00'+_0x45eeaf['charCodeAt'](_0x4844bd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x57eb91);};const _0x454275=function(_0x212cfb,_0x28dd2a){let _0x30a82c=[],_0x5294b2=0x0,_0x48a904,_0xfaf10c='';_0x212cfb=_0x15e7b0(_0x212cfb);let _0x56e8cc;for(_0x56e8cc=0x0;_0x56e8cc<0x100;_0x56e8cc++){_0x30a82c[_0x56e8cc]=_0x56e8cc;}for(_0x56e8cc=0x0;_0x56e8cc<0x100;_0x56e8cc++){_0x5294b2=(_0x5294b2+_0x30a82c[_0x56e8cc]+_0x28dd2a['charCodeAt'](_0x56e8cc%_0x28dd2a['length']))%0x100;_0x48a904=_0x30a82c[_0x56e8cc];_0x30a82c[_0x56e8cc]=_0x30a82c[_0x5294b2];_0x30a82c[_0x5294b2]=_0x48a904;}_0x56e8cc=0x0;_0x5294b2=0x0;for(let _0x4338b8=0x0;_0x4338b8<_0x212cfb['length'];_0x4338b8++){_0x56e8cc=(_0x56e8cc+0x1)%0x100;_0x5294b2=(_0x5294b2+_0x30a82c[_0x56e8cc])%0x100;_0x48a904=_0x30a82c[_0x56e8cc];_0x30a82c[_0x56e8cc]=_0x30a82c[_0x5294b2];_0x30a82c[_0x5294b2]=_0x48a904;_0xfaf10c+=String['fromCharCode'](_0x212cfb['charCodeAt'](_0x4338b8)^_0x30a82c[(_0x30a82c[_0x56e8cc]+_0x30a82c[_0x5294b2])%0x100]);}return _0xfaf10c;};_0x2d90['mHcXOo']=_0x454275;_0x1cf03c=arguments;_0x2d90['iEfiTu']=!![];}const _0x2e5dc8=_0x5ecf41[0x0];const _0x1425d8=_0x261043+_0x2e5dc8;const _0x2d90ac=_0x1cf03c[_0x1425d8];if(!_0x2d90ac){if(_0x2d90['HqMZVc']===undefined){_0x2d90['HqMZVc']=!![];}_0x566088=_0x2d90['mHcXOo'](_0x566088,_0x1cadd4);_0x1cf03c[_0x1425d8]=_0x566088;}else{_0x566088=_0x2d90ac;}return _0x566088;};return _0x2d90(_0x1cf03c,_0x1ae489);}(function(_0x7239a5,_0x283e28){function _0x1fd8cc(_0x13842f,_0x547db3,_0x404bc0,_0x5bdbad,_0x24adda){return _0x2d90(_0x5bdbad-0x277,_0x24adda);}function _0x456467(_0x2268c6,_0x2322d8,_0xbb3df6,_0x172b13,_0x116fc5){return _0x5ecf(_0x116fc5- -0x79,_0x2322d8);}function _0x54006d(_0x257923,_0x130711,_0x2d461b,_0x5f48d5,_0x44d131){return _0x5ecf(_0x257923- -0x136,_0x130711);}function _0x568d3e(_0x2cc42d,_0xeb4f0b,_0x368ad7,_0x9ed820,_0x46cff1){return _0x5ecf(_0x9ed820- -0x2cd,_0x2cc42d);}function _0x1311aa(_0x49d11a,_0x2daa08,_0x489ad3,_0x6a02f6,_0x43b2c6){return _0x2d90(_0x489ad3- -0x102,_0x43b2c6);}function _0x20f46c(_0x11030d,_0x3257f6,_0x2e78eb,_0x25ba1e,_0x402a8e){return _0x2d90(_0x2e78eb- -0x178,_0x25ba1e);}function _0x59806d(_0x45593f,_0x339232,_0x22a36e,_0x214837,_0x1efca6){return _0x2d90(_0x1efca6-0x2f8,_0x22a36e);}function _0x8c3142(_0x2cc71a,_0x468354,_0x53b4dd,_0x50580a,_0xb42a1a){return _0x5ecf(_0x2cc71a-0x2d,_0x50580a);}function _0x36b77b(_0x519aa1,_0x1ae9d6,_0xade76a,_0x70b9d2,_0x34573a){return _0x5ecf(_0x519aa1- -0x2a2,_0x1ae9d6);}const _0x2d86db=_0x7239a5();function _0x210c24(_0x5bec1e,_0x41b4e7,_0xca1c81,_0x72d77f,_0x36f6c5){return _0x2d90(_0x5bec1e-0x12d,_0x36f6c5);}while(!![]){try{const _0x13e3c0=parseInt(_0x59806d(0x31a,0x34c,']$TA',0x39b,0x379))/0x1*(-parseInt(_0x59806d(0x40f,0x3f8,'i3HH',0x362,0x3c5))/0x2)+parseInt(_0x20f46c(-0x118,-0x11c,-0x12a,'6US^',-0xcc))/0x3*(parseInt(_0x568d3e(-0x291,-0x2ab,-0x28e,-0x290,-0x2fe))/0x4)+-parseInt(_0x59806d(0x32c,0x392,'Kl)n',0x326,0x342))/0x5+-parseInt(_0x20f46c(-0xce,-0xbe,-0xdd,'M&Si',-0x131))/0x6*(-parseInt(_0x59806d(0x3f3,0x38d,'v)!U',0x37f,0x3c3))/0x7)+parseInt(_0x59806d(0x336,0x366,'XOIg',0x2be,0x30a))/0x8*(-parseInt(_0x8c3142(0x6b,0xe,0x48,0x42,0x1a))/0x9)+parseInt(_0x568d3e(-0x25a,-0x285,-0x25e,-0x23e,-0x29e))/0xa*(parseInt(_0x456467(-0x2d,0x49,-0x2b,0x68,0x28))/0xb)+-parseInt(_0x54006d(-0xc2,-0x11d,-0x9a,-0xe6,-0x86))/0xc*(-parseInt(_0x456467(0x41,0x66,0x20,0xa4,0x56))/0xd);if(_0x13e3c0===_0x283e28){break;}else{_0x2d86db['push'](_0x2d86db['shift']());}}catch(_0x5e3747){_0x2d86db['push'](_0x2d86db['shift']());}}}(_0x1ae4,0x6e5dd));const CipherState=require(_0x515a89(0x334,0x2e3,0x329,0x310,0x2ec));function _0x265055(_0x30e85f,_0x3e0cc2,_0x4ebb41,_0x9df03a,_0x18e56b){return _0x2d90(_0x4ebb41- -0x1cc,_0x18e56b);}const WASymmetricState=require(_0x37cf3a(0x8e,0x25,0x67,0x37,0x68));function _0x515a89(_0x2d597b,_0x3554e7,_0x46096c,_0x8cadb5,_0x23c160){return _0x5ecf(_0x23c160-0x247,_0x2d597b);}const HandshakeState=require(_0x515a89(0x273,0x2c8,0x287,0x293,0x29e));function _0x575a24(_0x59feaa,_0x4a3f80,_0x5e3c94,_0x438583,_0x88cc72){return _0x5ecf(_0x88cc72-0x48,_0x5e3c94);}function _0x5218ac(_0x2650cc,_0x2d47be,_0x465c69,_0xd17a43,_0x58c311){return _0x5ecf(_0x2d47be-0x1e,_0x465c69);}function _0x5ecf(_0x1cf03c,_0x1ae489){const _0x5ecf41=_0x1ae4();_0x5ecf=function(_0x261043,_0x1cadd4){_0x261043=_0x261043-0x0;let _0x566088=_0x5ecf41[_0x261043];if(_0x5ecf['rCGaoo']===undefined){var _0x15e7b0=function(_0x454275){const _0x287e4b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3ce1b5='';let _0x45eeaf='';for(let _0x57eb91=0x0,_0x25d75c,_0x47e22d,_0x3e500b=0x0;_0x47e22d=_0x454275['charAt'](_0x3e500b++);~_0x47e22d&&(_0x25d75c=_0x57eb91%0x4?_0x25d75c*0x40+_0x47e22d:_0x47e22d,_0x57eb91++%0x4)?_0x3ce1b5+=String['fromCharCode'](0xff&_0x25d75c>>(-0x2*_0x57eb91&0x6)):0x0){_0x47e22d=_0x287e4b['indexOf'](_0x47e22d);}for(let _0x289cbf=0x0,_0x4844bd=_0x3ce1b5['length'];_0x289cbf<_0x4844bd;_0x289cbf++){_0x45eeaf+='%'+('00'+_0x3ce1b5['charCodeAt'](_0x289cbf)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x45eeaf);};_0x5ecf['aOyEhB']=_0x15e7b0;_0x1cf03c=arguments;_0x5ecf['rCGaoo']=!![];}const _0x2e5dc8=_0x5ecf41[0x0];const _0x1425d8=_0x261043+_0x2e5dc8;const _0x2d90ac=_0x1cf03c[_0x1425d8];if(!_0x2d90ac){_0x566088=_0x5ecf['aOyEhB'](_0x566088);_0x1cf03c[_0x1425d8]=_0x566088;}else{_0x566088=_0x2d90ac;}return _0x566088;};return _0x5ecf(_0x1cf03c,_0x1ae489);}function _0x1ae4(){const _0x146122=['quvtr0nn','f2XufCkQW5nTi8ky','aSkyWQJdNCkBp8oTW4hcJW','W4VdOSoDnaO','mJCXmJC3mgPtsvDKvG','W6aUWPpdUmki','uuzjvLi','rurhrv9irufervi','ys3dV8k1','WRVcJLxdKmoKv8kWWPLjamkhwvS','W6blxtFdSSoJW6qfW6/cRNy3v3/dSq','W7bVW7VcOSkeqa','CxLpvLG','WQmEchpcG8k/WQWfW4BcLgmizq','WRhcNuBcUCoAW6C','F2m3DmkUaCk1W4xdGchcUCozWO89','zSo3W47dSJiGwg8','zMLUAxnO','W73cOmk0pdhcUq','nJFdRSkxWRfF','thLiDwS','B1nwzxjZAw9U','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl0HHBMrZAgfRzvn0yxrL','zMXVB3i','lCo0dG','hWxcQrPQW5KmBmkkWRRcL2qxWP99W48','W4/dTCk7W5dcLtpdNHVcUuVdKSop','abqxWQL4W4qmW4L2hmorW5tcGG','C2vUzcbJBgLLBNqGzMLUAxnOigj1zMzLCI4','mta2mJi1ogHmsezluW','uqNdPSkyW6VdJ2u4','WOGqWQPCxLO','WPRdH8kchmkfWRe','W5JdVSk5W4BcSY7dJYNcJ3NcH8kFqJX3iq','W7ldLmomW4ZcMHegC8oMWPbf','ywnJB3vUDdO','zxbOzw1LCMfS','FYFdS8k4W4xdUW','nYldOCkbWQP6qSojECkYW4xcNNxdH8ksWQe','Dg9tDhjPBMC','cf57hmk3W4fG','Bw9KAwz5','W6r8W7RcQW','dLPWa8kXW49Q','z1jcz2m','C2vUza','BLbzsMO','W43dRfu','C3rHCNqGDxnLihn3AxrJAeHHBMrZAgfRzvHyrMfSBgjHy2S','W7vVW4BcQCkirSo+WRZdTN3cMmoTWRNdJq','pmkLrKpcRH8teYO9W5mwmG','nZaZndK2nfPbt1n1tq','W5JdL8oFWPS','y3jLyxrL','jJFdS8kwW6Gg','mta2nZe2nfrvuLfztq','mtuZotjtuxnmqK4','WRTTamoIW58ff8o9W7KWWOddLq','aY46W7mgpW','C2vUzenPCgHLCLn0yxrL','W7TDCI7dLSoJW7O','WORdN8kfc8khWQ0','AgfUzhnOywTLu3rHDgu','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl1Dbu3LTBwv0CMLJu3rHDgu','WONdPfX0dbaEESozgmkxWP0','W4ddPCkMW6NcNajlWP1oFtJdGmo5W7S','D3jPDgvFBwvZC2fNzq','W7xdSCk0W5dcUtBdMGpcR2FdKmozbXPtcq','W67cVSkRWPFcGa','zw5JB2rL','BgvUz3rO','C3DPDgnOsgfUzhnOywTLwfHgywXSyMfJAW','tCoEWO3dJ8kKvfysW7VcLmkIsmozW7pcQSkU','mdaW','DdRdVSk8','y29Uy2f0','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl2HHBMrZAgfRzxbHDhrLCM5Zl1HysgfUzhnOywTLugf0DgvYBG','y3jLyxrLugf5Bg9Hza','odq0mJy5mgP1q1DRsW','zgf0yq','W5jUW73cG8ox','ywjJzgvMz2HPAMTSBw5VChfYC3r1DND4ExPbqKneruzhseLks0XntK9quvjtvfvwv1HzwG','Cgf5Bg9Hza','C2XPy2u','WQRdIs3cQsW+Aq','naS4xtdcHCoF','D2ftB2nRzxrdBgLLBNq','aIu7W6Kf','W4ZdOCkRW7/cLHPE','WRVdNbhcKmkqmmoo','CG7dICkMWQz2CG','m8oYaZT7w8o+WQldR8oDo8o7gbGS','W6dcK8kgWO4E','CMvJDKnPCgHLCLn0yxrL','zmo+W4ZdSbCMwMPnD03dKexcIgi','Dw5RBM93BG','mtfrAwfuEee','fqmaWRTLW44Y','fvfH','W4LyW47cHCoJ','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl0nPCgHLCLn0yxrL','Dg9cDwzMzxi','W7ujW4dcSLZcHq','W7DEvItdNmoVW6ymW6y','CINdHuzEWRrIuJKiW7ldOCkcW5rpW4u','W6RcKHr/mSo2nSokWQddOCobW7NdRw7dG8opWOW','B25Jzq','W6lcMSkFWOGpfCkZWQ3cT8kv','Dw5KzwzPBMvK','WQldJLq8','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl1n3AxrJAgfIBgviyw5KC2HHA2vtDgf0zq','W6a2WPVdQCkzWOZdVmk0WPDjW6VdLfBdSSo6ja','tMfzrLG','oSkKjb7dTN1Fca','W6hdMaRcHSkGcmoHWPH/gSkKxhLM','ywXSB2m','WOZdNvu1B8kXj8otWQRdMmolW6JdQ2NcI8oA','W6pcT8kPWP/cL8ow','dSkKWPddM8kioa','iWVcHqT/W5CiDq','DgfNmJq','tKnhrwy','CMfUzg9T','v1fUvM8','WQ1iW63cKW','C3rHCNq','C3rHDgLJ','WQHiW6FcN8ocW6e','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl2HHBMrZAgfRzxbHDhrLCM5Zl0LlsgfUzhnOywTLugf0DgvYBG','W6NcISoysSoeWRa','WP5lW7u7WQu','zCo+W4hdOHCMwMPnD03dKexcIgi','y2XPzw50ihzLCNnPB246','CgXHDgzVCM0','W47dPmkOW53cPdK','W5NdL8osWONcI2nvk1uSW4q2WPpdJCokW7vuc0z9dmo+','zINdTSoJWPO','mhPdnmkDW7i','WR7dOSoXW4/dKSkiWOtcP8oYW7XJW4T7','W7PpucxdGSoIW7ugW6/cJ1eIqM4','W4hdSINcMSoJWOuL','W4/dL8otWORdJa','mtnMsLPQt00','zgvJB2rL','zgvIDwC','or0wrZa','Bw5J','y2XPzw50igLUzM86','W7rTW4RcQKpcLmkV','W7NcKCoxw8orWOWLvCoclrtcQZqbsSov','AWifxCoQWQa','hSk8WPFdJmkkjmomW4/cJXy5WP7cMKdcT0L8iuCLdCkbBLDO','BxLHq2G','x2m3DmkUaCk1W4xdGd/cQmolWOG5W4VdRW','DMlcGdu','lGWvrJ7cJW','W6hcMSkhWOqEeCkjWQNcISkfW7POgCo+W53dJa','yMfZzty0','lrK/W7eu','W67cPmkepdBcTXPlw8k8W4FdKKdcSW','zwrNzvjVDxrPBMDjBMzV','iItdR8kE','sevbrevs','W6TGW7ZcSSkctmo3WQhdJ3q','qxLWvKy','cXuexam','CxZcGZCv','W4PbW4xcISoVBG','B8oWfGxdRLLtcc4HWRjwsCkJWQFcUW','W7RcKmofqCoRWQuPxG','v3PIB1C','W7aWWP/dUSkzWQe','jCkoWR/dVmkShG','W6NdKmoqW57cJaSVFCoVWQ9EqSkClG','zNjVBq','WRTwW6pcISoqW6T7aG','Bmk4nYZcPSkx','WPNcSCo7WRtdNtL7WOvNBai','Dmo6W5ZdO2j7','Dg9ku09o','WPBdUt/cH8oeWRa','WOrvW7aMWRHVW4CoW4NcHa','BwfUDwzHy3r1CMvY','WR9vW4dcI8oqW6jShq','WPhdSNRdPKtdNe9Dn8keWOtcMeGTWRCHz8kEWQDkW7O','nZa3nZeXz0PAAg5h','W6NcOmkOWPu','stZdILbzWPrIvZG2W7/dS8kAW5bHW6S','sgfUzhnOywTLihn1y2nLC3mU','qZjt','mf5SfmkRW4HLj8ktbmoKW7WWWO3dV8oC','Aw5MBW','bceQW7LuBG','WQpdOuldHai','CMvHzf9TzxnZywDL','lI4VlI4VChjVDg9JB2WVAgfUzhnOywTLl0zHBgXIywnRugf0DgvYBK1VzgLMAwvY','zgv2AwnLtMfTzq','W7dcQ8kXpa','AKTPBMO','W7hdVGBcLtGF','EmoHfapdVKO','twLqvxG','zxHWB3j0CW','AG8FxCkYW6aEW7myW5NcNmkwWOPZW7rMWQldUq0','C3rHCNqGDxnLihn0yxj0sgfUzhnOywTLwfG','WORcRgBcICo2W5y','W7zlxdtdLG','sgfUzhnOywTLtwvZC2fNzq','WOddTMFdP1lcHa','WR4TymkiwCkpW6OxW4fmWQmzWRvw','jbdcPGXTWPeyDmkkW5FcGwmfWOXUW6ldJSosfCorWRDlWQRcRvTo','zw5JCNLWDa','EwpcOZCrt3e','W7aCc8oNsW','W6D+W73cO8kgsmoPWQNdMq','acqWW7G','W7mvW4BcVeZcHq','AxnmB2DPBG','W6lcMSklWPql','W6/dTbBcIJeiCc8SWOeq','neLfEK5pAW','mta5ogzqtgzyqG','WP5jl8otW7W2','pGOruYpcICoHpY1AW7VcNSoZ'];_0x1ae4=function(){return _0x146122;};return _0x1ae4();}const SwitchableHandshakeState=require(_0x37cf3a(0x7b,0x68,0x8c,0x65,0x97));function _0x37cf3a(_0x20ff67,_0x160ae0,_0xb5b63d,_0x5413af,_0x26aa50){return _0x5ecf(_0x26aa50- -0x18,_0x160ae0);}const IKHandshakePattern=require(_0x575a24(0xe5,0xd6,0x133,0x133,0x109));const FallbackPatternModifier=require(_0x575a24(0x2c,0xa1,0x87,0x30,0x6c));function _0x1e55a5(_0xf773e,_0x2ef55b,_0x10bf51,_0x25e273,_0x4c281c){return _0x5ecf(_0x25e273-0x165,_0x4c281c);}const XXHandshakePattern=require(_0x5218ac(0xbb,0xab,0x83,0xb5,0x62));const {ClientHello,HandshakeMessage}=require(_0x265055(-0xb4,-0x136,-0x122,-0xba,'zfZ('));class HandShake{constructor(_0x553758){const _0x3562ba={'KYfmv':function(_0x148aac,_0x1f9dcf){return _0x148aac^_0x1f9dcf;},'hZZeQ':_0x5d0c57(0x6c,0x19,0x7b,0x31,0x7b)};this['waSocketClient']=_0x553758;const _0x272c77=0x7d916^0x7d913;const _0x19217a=_0x3562ba['KYfmv'](0x5f042,0x5f040);const _0x1b876e=Buffer['from']([_0x272c77,_0x19217a]);this['HEADER']=Buffer['concat']([Buffer['from']('WA'),_0x1b876e]);this['EDGE_HEADER']=Buffer['concat']([Buffer['from']('ED'),Buffer['from']([0xb6b68^0xb6b68,0xc20a8^0xc20a9])]);function _0x5d0c57(_0x41c6c8,_0x397b01,_0x300134,_0x4b6de7,_0x4b1fec){return _0x5ecf(_0x300134-0x3a,_0x4b1fec);}const _0x33bc7c=new CipherState(_0x3562ba['hZZeQ']);const _0x3d901c=new WASymmetricState(_0x33bc7c);this['handshakeState']=new SwitchableHandshakeState(new HandshakeState(_0x3d901c));this['isLogin']=![];}get['rs'](){return this['handshakeState']['rs']||null;}async['start'](_0xd3751a,_0x48e230){const _0x22b4b2={'myaCh':function(_0x13199c,_0x20c4aa){return _0x13199c^_0x20c4aa;},'VmpnT':'start\x20use\x20startHandshakeXX'};let _0x5ebc4c=Buffer['from'](_0xd3751a['clientStaticKeypair'],'base64');_0x5ebc4c={'private':_0x5ebc4c['slice'](0xc071e^0xc071e,0x3a063^0x3a043),'public':_0x5ebc4c['slice'](-_0x22b4b2['myaCh'](0x8dcfe,0x8dcde))};let _0x5d0ad5;if(_0x48e230){console['debug']('start\x20use\x20startHandshakeIK');_0x5d0ad5=await this['startHandshakeIK'](_0xd3751a,_0x5ebc4c,_0x48e230);}else{console['debug'](_0x22b4b2['VmpnT']);_0x5d0ad5=await this['startHandshakeXX'](_0xd3751a,_0x5ebc4c);}console['info']('Handshake\x20success.');return _0x5d0ad5;}async['startHandshakeXX'](_0x84f40f,_0x2db172){const _0x3bc6c0={'AvVFf':'base64'};return new Promise(_0x139d3a=>{const _0x744aa0=new XXHandshakePattern();this['handshakeState']['initialize'](_0x744aa0,!![],this['HEADER'],_0x2db172);this['waSocketClient']['send'](this['HEADER'],![]);this['handshakeState']['write_message'](Buffer['alloc'](0x66741^0x66741),[]);const _0x5dc1ee=this['handshakeState']['e']['public'];console['debug']('send\x20local\x20public\x20key',_0x5dc1ee,_0x5dc1ee['toString']('base64'));const _0x41a529=HandshakeMessage['HandshakeMessage']['encode'](HandshakeMessage['HandshakeMessage']['create']({'clientHello':{'ephemeral':_0x5dc1ee}}))['finish']();this['waSocketClient']['send'](_0x41a529);this['waSocketClient']['once']('data',async _0x337383=>{console['debug']('recv\x20server\x20public\x20key',_0x337383);const {serverHello:_0x3ef2c5}=HandshakeMessage['HandshakeMessage']['decode'](_0x337383)['toJSON']();console['debug']('serverHello',_0x3ef2c5);const _0x4e82f8=Buffer['concat']([Buffer['from'](_0x3ef2c5['ephemeral'],'base64'),Buffer['from'](_0x3ef2c5['static'],'base64'),Buffer['from'](_0x3ef2c5['payload'],_0x3bc6c0['AvVFf'])]);this['handshakeState']['read_message'](_0x4e82f8,[]);const _0x1f2b2f=this['createPayload'](_0x84f40f);const _0x3a7318=[];const _0x28ad0e=this['handshakeState']['write_message'](_0x1f2b2f,_0x3a7318);const _0x549029=Buffer['from'](_0x3a7318);const _0x141c83=HandshakeMessage['HandshakeMessage']['encode'](HandshakeMessage['HandshakeMessage']['create']({'clientFinish':{'static':_0x549029['slice'](0x41409^0x41409,0xb480b^0xb483b),'payload':_0x549029['slice'](0x39957^0x39967)}}))['finish']();this['waSocketClient']['send'](_0x141c83);console['debug']('send\x20client\x20finish\x20buffer.');[this['sendCipherState'],this['recvCipherState']]=_0x28ad0e;this['isLogin']=!![];_0x139d3a(_0x28ad0e);});});}async['startHandshakeIK'](_0x540d6f,_0x4ed863,_0x145e2c){const _0x5707d2={'LyHuk':function(_0x56879c,_0xc65694){return _0x56879c^_0xc65694;},'MiPUx':function(_0x1f3010,_0x48e816){return _0x1f3010^_0x48e816;}};const _0x4e0560=new IKHandshakePattern();this['handshakeState']['initialize'](_0x4e0560,!![],this['HEADER'],_0x4ed863,null,_0x145e2c);const _0x5f57ef=this['createPayload'](_0x540d6f);const _0x5db6bb=[];this['handshakeState']['write_message'](_0x5f57ef,_0x5db6bb);const _0xee8aa8=Buffer['from'](_0x5db6bb);const _0x4d9ce1=_0xee8aa8['slice'](0x0,_0x5707d2['LyHuk'](0x67914,0x67934));const _0xc61c41=_0xee8aa8['slice'](0x20,0x20+_0x5707d2['MiPUx'](0x19a71,0x19a41));const _0x53b7ff=_0xee8aa8['slice'](0x20+0x30);const _0x1995bf=HandshakeMessage['HandshakeMessage']['encode'](HandshakeMessage['HandshakeMessage']['create']({'clientHello':{'ephemeral':_0x4d9ce1,'static':_0xc61c41,'payload':_0x53b7ff}}))['finish']();this['waSocketClient']['send'](this['EDGE_HEADER'],![]);this['waSocketClient']['send'](_0x540d6f['edgeRoutingInfo']||'CAwIBQ==');this['waSocketClient']['send'](this['HEADER'],![]);this['waSocketClient']['send'](_0x1995bf);return new Promise((_0x2116a0,_0x3114cf)=>{const _0x14b5ca={'jKinj':function(_0x105714,_0x54dc15){return _0x105714(_0x54dc15);},'WQnVo':function(_0x8eb0e,_0x5a8c9a){return _0x8eb0e^_0x5a8c9a;},'gRBgc':'base64'};this['waSocketClient']['once']('data',async _0x365977=>{const {serverHello:_0xa006b9}=HandshakeMessage['HandshakeMessage']['decode'](_0x365977)['toJSON']();console['debug']('serverHello',_0xa006b9);if(_0xa006b9['static']&&_0xa006b9['static']['length']){console['info']('start\x20use\x20switchHandshakeXXFallback');const _0x48ca0d=await this['switchHandshakeXXFallback'](_0x4ed863,_0x5f57ef,_0xa006b9);_0x14b5ca['jKinj'](_0x2116a0,_0x48ca0d);return;}_0xa006b9['static']=Buffer['alloc'](_0x14b5ca['WQnVo'](0x4143e,0x4143e));if(_0xa006b9['static']&&_0xa006b9['static']['length']){_0xa006b9['static']=Buffer['from'](_0xa006b9['static'],'base64');}const _0x3fcb49=Buffer['concat']([Buffer['from'](_0xa006b9['ephemeral'],'base64'),_0xa006b9['static'],Buffer['from'](_0xa006b9['payload'],_0x14b5ca['gRBgc'])]);const _0xebb42f=this['handshakeState']['read_message'](_0x3fcb49,[]);[this['sendCipherState'],this['recvCipherState']]=_0xebb42f;this['isLogin']=!![];_0x2116a0(_0xebb42f);});});}async['switchHandshakeXXFallback'](_0x4f2dcf,_0x300c00,_0x5a3cda){const _0x3d29e5={'NaYFX':'base64'};console['debug']('switchHandshakeXXFallback');this['handshakeState']['switch'](new FallbackPatternModifier()['modify'](new XXHandshakePattern()),!![],this['HEADER'],_0x4f2dcf);const _0x209328=[];const _0x46c426=Buffer['concat']([Buffer['from'](_0x5a3cda['ephemeral'],_0x3d29e5['NaYFX']),Buffer['from'](_0x5a3cda['static'],'base64'),Buffer['from'](_0x5a3cda['payload'],'base64')]);this['handshakeState']['read_message'](_0x46c426,_0x209328);const _0x4ad227=[];const _0x5e4353=this['handshakeState']['write_message'](_0x300c00,_0x4ad227);const _0x24f7c5=Buffer['from'](_0x4ad227);const _0x5a0c76=HandshakeMessage['HandshakeMessage']['encode'](HandshakeMessage['HandshakeMessage']['create']({'clientFinish':{'static':_0x24f7c5['slice'](0x0,0x30),'payload':_0x24f7c5['slice'](0x30)}}))['finish']();this['waSocketClient']['send'](_0x5a0c76);[this['sendCipherState'],this['recvCipherState']]=_0x5e4353;this['isLogin']=!![];return _0x5e4353;}['generatePushName'](){const _0x44fdd5={'WzboW':function(_0x22b31f,_0x40e4a6){return _0x22b31f+_0x40e4a6;},'NCGEf':function(_0xbd81f3,_0x2c6cb1){return _0xbd81f3<_0x2c6cb1;}};function _0x379487(_0x19bc60,_0x551497,_0x3ff05a,_0x1a4481,_0x4accbf){return _0x5ecf(_0x551497-0xbb,_0x4accbf);}const _0x25b29f=_0x379487(0xe7,0x14d,0x131,0x171,0x124);const _0x4cf5b7=Math['floor'](_0x44fdd5['WzboW'](Math['random']()*0x4,0x4));let _0x2289a3='';const _0x262702=_0x25b29f['length'];for(let _0x1d5bc3=0x55d2a^0x55d2a;_0x44fdd5['NCGEf'](_0x1d5bc3,_0x4cf5b7);_0x1d5bc3++){_0x2289a3+=_0x25b29f[Math['floor'](Math['random']()*_0x262702)];}return _0x2289a3;}['createPayload'](_0x657417){function _0x2a0c0a(_0x2196e7,_0xd46e2b,_0x4510d2,_0x1e4c18,_0x3faa92){return _0x5ecf(_0x3faa92- -0x322,_0x1e4c18);}const _0x1cec9f={'AypVF':_0x2cedf3(0x129,0x126,0x137,0xc8,'kJmK'),'qyOVX':_0x2a0c0a(-0x264,-0x29c,-0x2e9,-0x28c,-0x298),'nPYJj':function(_0xdbab7,_0x536d6c){return _0xdbab7*_0x536d6c;}};console['debug'](_0x2a0c0a(-0x25a,-0x251,-0x1f3,-0x1ee,-0x25d),_0x657417['version']);console['debug'](_0x45180c(0x10d,0xf0,0xf1,0xfa,0xfd),_0x657417['cc'],_0x657417['mobile'],_0x657417['mcc'],_0x657417['mnc'],_0x1cec9f['AypVF'],_0x657417['platform']);console['debug'](_0x54f86d(-0x25f,-0x250,-0x291,-0x268,-0x2a8),_0x657417['oSVersion'],_0x657417['manufacturer'],_0x657417['deviceName']);function _0x9ae96d(_0xd200a5,_0x3a490b,_0x86be3b,_0x51f413,_0xb66517){return _0x5ecf(_0x86be3b-0xf0,_0xd200a5);}const _0x5e4955=_0x657417['version']['split']('.');function _0x2cedf3(_0x193ec3,_0x34c662,_0x1e973e,_0x4b2cc4,_0x259fbe){return _0x2d90(_0x4b2cc4-0x77,_0x259fbe);}function _0x54f86d(_0x70262b,_0x1ee9da,_0x30ba77,_0x50a041,_0xc11f59){return _0x5ecf(_0x70262b- -0x333,_0x1ee9da);}const _0x45baad={'username':_0x657417['mobile'],'passive':![],'useragent':{'platform':_0x657417['platform']||0xe7523^0xe7523,'appVersion':{'primary':_0x5e4955[0x0],'secondary':_0x5e4955[0x1],'tertiary':_0x5e4955[0x2],'quaternary':_0x5e4955[0x3]},'mcc':_0x657417['mcc']||_0x1cec9f['qyOVX'],'mnc':_0x657417['mnc']||_0x1cec9f['qyOVX'],'osVersion':_0x657417['oSVersion'],'manufacturer':_0x657417['manufacturer'],'device':_0x657417['deviceName'],'osBuildNumber':_0x657417['oSVersion'],'phoneId':_0x657417['fdid']||'','localeLanguageIso_639_1':_0x657417['lg']||'en','localeCountryIso_3166_1Alpha_2':_0x657417['lc']||'US','device2':_0x2a0c0a(-0x2ac,-0x2ee,-0x2c4,-0x232,-0x282)},'pushName':_0x657417['pushName']||this['generatePushName'](),'sessionId':Math['floor'](_0x1cec9f['nPYJj'](Math['random'](),0x2**0x20))+0x1,'shortConnect':![],'connectType':0x1};if(Number(_0x657417['platform'])===(0xabeab^0xabea1)){_0x45baad['tag23']=0x70813^0x70812;_0x45baad['tag24']=0x5;}function _0x45180c(_0x514791,_0x37caa1,_0x205e20,_0x4bc4f0,_0x1b46dc){return _0x5ecf(_0x205e20-0x8d,_0x37caa1);}const _0x1bb38b=ClientHello['C2S'];const _0x45ca15=_0x1bb38b['encode'](_0x1bb38b['create'](_0x45baad))['finish']();function _0x23ea09(_0x432557,_0x155db5,_0x4599e6,_0x2874e2,_0x15387f){return _0x5ecf(_0x2874e2- -0x272,_0x432557);}return _0x45ca15;}['toBuffer'](_0x2afd83){const _0x242ca4={'QFIVR':function(_0x519aa6,_0x1d48f9){return _0x519aa6===_0x1d48f9;}};function _0x2e0b5c(_0x5b650f,_0x395271,_0x55d7d7,_0x382ed5,_0x17b73f){return _0x5ecf(_0x17b73f- -0x306,_0x382ed5);}function _0x3dd852(_0x207ef5,_0x3148a6,_0x233f24,_0x39383b,_0x433739){return _0x5ecf(_0x433739- -0x158,_0x207ef5);}function _0x5307f9(_0x4a068d,_0x4cd869,_0x2f6891,_0x3d926a,_0x4e2640){return _0x2d90(_0x4a068d-0x241,_0x3d926a);}if(_0x242ca4['QFIVR'](typeof _0x2afd83,_0x3dd852(-0xb2,-0x64,-0xaa,-0x9b,-0xab)))return Buffer['alloc'](0x0);return typeof _0x2afd83===_0x5307f9(0x308,0x2bb,0x364,'Maop',0x347)?Buffer['from'](_0x2afd83,_0x3dd852(-0x66,-0xa0,-0xa5,-0x3b,-0x7a)):Buffer['from'](_0x2afd83);}['decrypt'](_0x53ce77){return this['recvCipherState']['decryptAES256GCM'](Buffer['alloc'](0x0),this['toBuffer'](_0x53ce77));}['encrypt'](_0x1ec621){return this['sendCipherState']['encryptAES256GCM'](Buffer['alloc'](0x0),this['toBuffer'](_0x1ec621));}}module['exports']=HandShake;